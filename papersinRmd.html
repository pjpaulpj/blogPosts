<h1>Writing papers using R Markdown</h1>

<p>I have been watching the activity in <a href="http://rstudio.org"><code>RStudio</code></a> and <a href="http://yihui.name/knitr/"><code>knitr</code></a> for a while, and
have even been using <code>Rmd</code> (R markdown) files in my own work as a way to easily provide commentary on an actual dataset
analysis. Yihui has proposed <a href="http://yihui.name/en/2012/03/a-really-fast-statistics-journal/">writing papers</a> in markdown and posting them to a blog as a way to host a statistics journal, and lots of people are now using <code>knitr</code> as a way
to create reproducible blog posts that include code (including yours truly).</p>

<p>The idea of writing a paper that actually includes the necessary code to perform the analysis, and is actually readable
in its raw form, and that someone else could actually run was pretty appealing. Unfortunately, I had not had the time
or opportunity to actually try it, until recently our group submitted a conference paper that included a lot of analysis in <code>R</code> that seemed like the perfect opportunity to try this. 
(I will link to the paper here when I hear more, or get clearance from my PI). Originally we wrote the paper in Microsoft&reg; Word, but after submission I decided to see what it would have taken to write it as an <code>Rmd</code> document that could
then generate <code>markdown</code> or <code>html</code>.</p>

<p>It turned out that it was not that hard, but it did force me to do some things differently. This is what I want to 
discuss here.</p>

<h2>Tables and Figures</h2>

<p>As I&#39;m sure most of you know, Word (and other WYSIWYG editors) have ability to keep track of your object numbers, this
is especially nice for keeping your figure and table numbers straight. Of course, there is no such ability built into
a static text file, but I found it was easy to write a couple of functions for this. The way I came up with is to have
a variable that contains a label for the figure or table, a function that increments the counter when new figures or 
tables are added, and a function that prints the associated number for a particular label. This does require a bit of 
forethought on the part of the writer, because you may have to add a table or figure label to the variable long before
you actually create it, but as long as you use sane (i.e. descriptive) labels, it shouldn&#39;t be a big deal. Let me show
you what I mean.</p>

<h3>Counting</h3>

<pre><code class="r">incCount &lt;- function(inObj, useName) {
    nObj &lt;- length(inObj)
    useNum &lt;- max(inObj) + 1
    inObj &lt;- c(inObj, useNum)
    names(inObj)[nObj + 1] &lt;- useName
    inObj
}
figCount &lt;- c(`_` = 0)
tableCount &lt;- c(`_` = 0)
</code></pre>

<p>The <code>incCount</code> function is very simple, it takes an object, checks the maximum count, and then adds an incremental value
with the supplied name. In this example, I initialized the <code>figCount</code> and <code>tableCount</code> objects with a non-sensical named
value of zero. </p>

<p>Now in the process of writing, I decide I&#39;m going to need a table on the amount of time spent by post-docs writing blog
posts in different years of their post-doc training. Lets call this <code>t.blogPostDocs</code>. Notice that this is a fairly 
descriptive name. We can assign it a number like so:</p>

<pre><code class="r">tableCount &lt;- incCount(tableCount, &quot;t.blogPostDocs&quot;)
tableCount
</code></pre>

<pre><code>##              _ t.blogPostDocs 
##              0              1
</code></pre>

<h3>Inserting</h3>

<p>So now we have a variable with a named number we can refer to. But how do we insert it into the text? We are going to
use another function that will let us insert either the text with a link, or just the text itself.</p>

<pre><code class="r">pasteLabel &lt;- function(preText, inObj, objName, insLink = TRUE) {
    objNum &lt;- inObj[objName]

    useText &lt;- paste(preText, objNum, sep = &quot; &quot;)
    if (insLink) {
        useText &lt;- paste(&quot;[&quot;, useText, &quot;](#&quot;, objName, &quot;)&quot;, sep = &quot;&quot;)
    }
    useText
}
</code></pre>

<p>This function allows us to insert the table number like so:</p>

<pre><code class="r">r I(pasteLabel(&quot;Table&quot;, tableCount, &quot;t.blogPostDocs&quot;))
</code></pre>

<p>This would be inserted into a normal <code>inline</code> code block. The <code>I</code> makes sure that the text will appear as normal text,
and not get formatted as a code block. The default behavior is to insert as a relative link, thereby enabling the use
of relative links to link where a table / figure is mentioned to its actual location. For example, we can insert the 
anchor link like so:</p>

<pre><code>&lt;a id=&quot;t.blogPostDocs&quot;&gt;&lt;/a&gt;
</code></pre>

<h3>Markdown Tables</h3>

<p>Followed by the actual table text. This brings up the subject of <code>markdown</code> tables. I also wrote a function (thanks to
Yihui again) that transforms a normal <code>R</code> <code>data.frame</code> to a <code>markdown</code> table.</p>

<pre><code class="r">tableCat &lt;- function(inFrame) {
    outText &lt;- paste(names(inFrame), collapse = &quot; | &quot;)
    outText &lt;- c(outText, paste(rep(&quot;---&quot;, ncol(inFrame)), collapse = &quot; | &quot;))
    invisible(apply(inFrame, 1, function(inRow) {
        outText &lt;&lt;- c(outText, paste(inRow, collapse = &quot; | &quot;))
    }))
    return(outText)
}
</code></pre>

<p>Lets see it in action.</p>

<pre><code class="r">postDocBlogs &lt;- data.frame(PD = c(&quot;p1&quot;, &quot;p2&quot;, &quot;p3&quot;), NBlog = c(4, 10, 2), Year = c(1, 
    4, 2))
postDocBlogs
</code></pre>

<pre><code>##   PD NBlog Year
## 1 p1     4    1
## 2 p2    10    4
## 3 p3     2    2
</code></pre>

<pre><code class="r">
postDocInsert &lt;- tableCat(postDocBlogs)
postDocInsert
</code></pre>

<pre><code>## [1] &quot;PD | NBlog | Year&quot; &quot;--- | --- | ---&quot;   &quot;p1 |  4 | 1&quot;      
## [4] &quot;p2 | 10 | 4&quot;       &quot;p3 |  2 | 2&quot;
</code></pre>

<p>To actually insert it into the text, use a code chunk with <code>results=&#39;asis&#39;</code> and <code>echo=FALSE</code>. </p>

<pre><code class="r">cat(postDocInsert, sep = &quot;\n&quot;)
</code></pre>

<table><thead>
<tr>
<th>PD</th>
<th>NBlog</th>
<th>Year</th>
</tr>
</thead><tbody>
<tr>
<td>p1</td>
<td>4</td>
<td>1</td>
</tr>
<tr>
<td>p2</td>
<td>10</td>
<td>4</td>
</tr>
<tr>
<td>p3</td>
<td>2</td>
<td>2</td>
</tr>
</tbody></table>

<p>Before inserting the table though, you might want an inline code with the table number and caption, like this:</p>

<p><code>I(pasteLabel(&quot;Table&quot;, tableCount, &quot;t.blogPostDocs&quot;, FALSE))</code> This is the number of blog posts and year of training for post-docs.</p>

<p>Table 1 This is the number of blog posts and year of training for post-docs.</p>

<p>Remember for captions to set the <code>insLink</code> variable to <code>FALSE</code> so that you don&#39;t generate a link from the caption.</p>

<h3>Figures</h3>

<p>Oftentimes, you will have code that generates the figure, and then you want to insert the figure at a different point.
This is accomplished by the judicious use of <code>echo</code> and <code>include</code> chunk options.</p>

<p>For example, we can create a <code>ggplot2</code> figure and store it in a variable in one chunk, and then <code>print</code> it in a later
chunk to actually insert it into the text body.</p>

<pre><code class="r">plotData &lt;- data.frame(x = rnorm(1000, 1, 5), y = rnorm(1000, 0, 2))
plotKeep &lt;- ggplot(plotData, aes(x = x, y = y)) + geom_point()
figCounts &lt;- incCount(figCount, &quot;f.randomFigure&quot;)
</code></pre>

<p>And now we decide to actually insert it using <code>print(plotKeep)</code> with the option of <code>echo=FALSE</code>:</p>

<p><img src="data:image/png;base64,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" alt="plot of chunk figureInsert"/> </p>

<p><strong><a href="#f.randomFigure">Figure 1</a>. A random figure.</strong></p>

<h2>Echo and Include</h2>

<p>This brings up the issue of how to keep the code from appearing in the text body. I found depending on the particulars,
either using <code>echo=FALSE</code> or <code>include=FALSE</code> would do the job. This is meant to be a paper, a reproducible one, but a 
paper nonetheless, and therefore the code should not end up in the text body. </p>

<h2>References</h2>

<p>One thing I haven&#39;t done yet is convert all the references. I am planning to try using the <a href="https://github.com/cboettig/knitcitations/">knitcitations</a> package. I will probably post on that experience.</p>

<h2>HTML generation</h2>

<p>For generating a full <code>html</code> version of the paper, I change the default <code>RStudio</code> <code>markdown</code> render options like so:</p>

<pre><code>htmlOptions &lt;- markdownHTMLOptions(defaults=TRUE)
htmlOptions &lt;- htmlOptions[htmlOptions != &quot;hard_wrap&quot;]
markdownToHTML(inputFile, outputFile, options = htmlOptions)
</code></pre>

<p>I do this because when I write my documents, I want the source to be readable online. If this is a <code>github</code> hosted repo,
that means being displayed in the <code>github</code> file browser, which does not do line wrapping. So I set up a 120 character
line in my editor, and try very hard to stick to that. </p>

<h2>Function source</h2>

<p>You can find the previously mentioned functions in a github gist <a href="https://gist.github.com/3858973">here</a>.</p>

<h2>Post source</h2>

<p>The source files for this blog post can be found at: <a href="https://github.com/rmflight/blogPosts/blob/master/papersinRmd.Rmd"><code>Rmd</code></a>, <a href="https://github.com/rmflight/blogPosts/blob/master/papersinRmd.md"><code>md</code></a>, and <a href="https://github.com/rmflight/blogPosts/blob/master/papersinRmd.html"><code>html</code></a>.</p>

<p>Posted on October 9, 2012, at <a href="http://robertmflight.blogspot.com/2012/10/writing-papers-using-r-markdown.html">http://robertmflight.blogspot.com/2012/10/writing-papers-using-r-markdown.html</a></p>
